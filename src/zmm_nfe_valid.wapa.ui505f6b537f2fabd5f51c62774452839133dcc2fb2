sap.ui.define([],	                                                                                                                                                                                                                                             
	function () {                                                                                                                                                                                                                                                 
		"use strict";                                                                                                                                                                                                                                                
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
        function _prettifyXml(xml, tab) { // tab = optional indent value, default is tab (\t)                                                                                                                                                                  
            var formatted = '', indent= '';                                                                                                                                                                                                                    
            tab = tab || '\t';                                                                                                                                                                                                                                 
            xml.split(/>\s*</).forEach(function(node) {                                                                                                                                                                                                        
                if (node.match( /^\/\w/ )) indent = indent.substring(tab.length); // decrease indent by one 'tab'                                                                                                                                              
                formatted += indent + '<' + node + '>\r\n';                                                                                                                                                                                                    
                if (node.match( /^<?\w[^>]*[^\/]$/ )) indent += tab;              // increase indent                                                                                                                                                           
            });                                                                                                                                                                                                                                                
            return formatted.substring(1, formatted.length-3);                                                                                                                                                                                                 
        }                                                                                                                                                                                                                                                      
/*                                                                                                                                                                                                                                                             
        function _prettifyXml_old(sourceXml)                                                                                                                                                                                                                   
        {                                                                                                                                                                                                                                                      
            var xmlDoc = new DOMParser().parseFromString(sourceXml, 'application/xml');                                                                                                                                                                        
            var xsltDoc = new DOMParser().parseFromString([                                                                                                                                                                                                    
                // describes how we want to modify the XML - indent everything                                                                                                                                                                                 
                '<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform">',                                                                                                                                                                           
                '  <xsl:strip-space elements="*"/>',                                                                                                                                                                                                           
                '  <xsl:template match="para[content-style][not(text())]">', // change to just text() to strip space in text nodes                                                                                                                             
                '    <xsl:value-of select="normalize-space(.)"/>',                                                                                                                                                                                             
                '  </xsl:template>',                                                                                                                                                                                                                           
                '  <xsl:template match="node()|@*">',                                                                                                                                                                                                          
                '    <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>',                                                                                                                                                                          
                '  </xsl:template>',                                                                                                                                                                                                                           
                '  <xsl:output indent="yes"/>',                                                                                                                                                                                                                
                '</xsl:stylesheet>',                                                                                                                                                                                                                           
            ].join('\n'), 'application/xml');                                                                                                                                                                                                                  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                                               
            var xsltProcessor = new XSLTProcessor();&nbsp;&nbsp;&nbsp;&nbsp;                                                                                                                                                                                   
            xsltProcessor.importStylesheet(xsltDoc);                                                                                                                                                                                                           
            var resultDoc = xsltProcessor.transformToDocument(xmlDoc);                                                                                                                                                                                         
            var resultXml = new XMLSerializer().serializeToString(resultDoc);                                                                                                                                                                                  
            return resultXml;                                                                                                                                                                                                                                  
        }                                                                                                                                                                                                                                                      
*/                                                                                                                                                                                                                                                             
        function _getContentViewer(that) {                                                                                                                                                                                                                     
            if (!that._oContentViewer) {                                                                                                                                                                                                                       
                that._oContentViewer = sap.ui.xmlfragment("umicore.mm.nfevalid.zmmnfevalid.view.ContentViewer",that);                                                                                                                                          
                that.getView().addDependent(that._oContentViewer);                                                                                                                                                                                             
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
           return that._oContentViewer;                                                                                                                                                                                                                        
        }                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
        function _putContentOnIt(that,xmlContent) {                                                                                                                                                                                                            
            //load the XML string in the 'editor' control                                                                                                                                                                                                      
            var oGlobalModel = that.getGlobalModel();                                                                                                                                                                                                          
            var oGlobalModelData = oGlobalModel.getData();                                                                                                                                                                                                     
            var sXmlContentPretty = _prettifyXml(xmlContent);                                                                                                                                                                                                  
            oGlobalModelData.xml = sXmlContentPretty;                                                                                                                                                                                                          
            oGlobalModel.setData(oGlobalModelData);                                                                                                                                                                                                            
        }                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
		var ContentViewer = {                                                                                                                                                                                                                                        
            popUp: function(that,xmlContent) {                                                                                                                                                                                                                 
                _getContentViewer(that).open();                                                                                                                                                                                                                
                _putContentOnIt(that,xmlContent);                                                                                                                                                                                                              
            },                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            close: function(that) {                                                                                                                                                                                                                            
                that._oContentViewer.close();                                                                                                                                                                                                                  
            }                                                                                                                                                                                                                                                  
		}                                                                                                                                                                                                                                                            
&nbsp;&nbsp;                                                                                                                                                                                                                                                   
		return ContentViewer;                                                                                                                                                                                                                                        
	}                                                                                                                                                                                                                                                             
);                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               